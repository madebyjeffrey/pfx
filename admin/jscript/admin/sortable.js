jQuery.iUtil={getPosition:function(b){var c=0,d=0,e=b.style,f=false;if(jQuery(b).css("display")=="none"){var g=e.visibility,j=e.position;f=true;e.visibility="hidden";e.display="block";e.position="absolute"}for(var h=b;h;){c+=h.offsetLeft+(h.currentStyle&&!jQuery.browser.opera?parseInt(h.currentStyle.borderLeftWidth)||0:0);d+=h.offsetTop+(h.currentStyle&&!jQuery.browser.opera?parseInt(h.currentStyle.borderTopWidth)||0:0);h=h.offsetParent}for(h=b;h&&h.tagName&&h.tagName.toLowerCase()!="body";){c-=h.scrollLeft||
0;d-=h.scrollTop||0;h=h.parentNode}if(f==true){e.display="none";e.position=j;e.visibility=g}return{x:c,y:d}},getPositionLite:function(b){for(var c=0,d=0;b;){c+=b.offsetLeft||0;d+=b.offsetTop||0;b=b.offsetParent}return{x:c,y:d}},getSize:function(b){var c=jQuery.css(b,"width"),d=jQuery.css(b,"height"),e=0,f=0,g=b.style;if(jQuery(b).css("display")!="none"){e=b.offsetWidth;f=b.offsetHeight}else{var j=g.visibility,h=g.position;g.visibility="hidden";g.display="block";g.position="absolute";e=b.offsetWidth;
f=b.offsetHeight;g.display="none";g.position=h;g.visibility=j}return{w:c,h:d,wb:e,hb:f}},getSizeLite:function(b){return{wb:b.offsetWidth||0,hb:b.offsetHeight||0}},getClient:function(b){var c;if(b){c=b.clientWidth;b=b.clientHeight}else{b=document.documentElement;c=window.innerWidth||self.innerWidth||b&&b.clientWidth||document.body.clientWidth;b=window.innerHeight||self.innerHeight||b&&b.clientHeight||document.body.clientHeight}return{w:c,h:b}},getScroll:function(b){var c=0,d=0,e=0,f=0,g=0,j=0;if(b&&
b.nodeName.toLowerCase()!="body"){c=b.scrollTop;d=b.scrollLeft;e=b.scrollWidth;f=b.scrollHeight;j=g=0}else{if(document.documentElement){c=document.documentElement.scrollTop;d=document.documentElement.scrollLeft;e=document.documentElement.scrollWidth;f=document.documentElement.scrollHeight}else if(document.body){c=document.body.scrollTop;d=document.body.scrollLeft;e=document.body.scrollWidth;f=document.body.scrollHeight}g=self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||
0;j=self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}return{t:c,l:d,w:e,h:f,iw:g,ih:j}},getMargins:function(b,c){var d=jQuery(b),e=d.css("marginTop")||"",f=d.css("marginRight")||"",g=d.css("marginBottom")||"";d=d.css("marginLeft")||"";return c?{t:parseInt(e)||0,r:parseInt(f)||0,b:parseInt(g)||0,l:parseInt(d)}:{t:e,r:f,b:g,l:d}},getPadding:function(b,c){var d=jQuery(b),e=d.css("paddingTop")||"",f=d.css("paddingRight")||"",g=d.css("paddingBottom")||"";d=d.css("paddingLeft")||
"";return c?{t:parseInt(e)||0,r:parseInt(f)||0,b:parseInt(g)||0,l:parseInt(d)}:{t:e,r:f,b:g,l:d}},getBorder:function(b,c){var d=jQuery(b),e=d.css("borderTopWidth")||"",f=d.css("borderRightWidth")||"",g=d.css("borderBottomWidth")||"";d=d.css("borderLeftWidth")||"";return c?{t:parseInt(e)||0,r:parseInt(f)||0,b:parseInt(g)||0,l:parseInt(d)||0}:{t:e,r:f,b:g,l:d}},getPointer:function(b){return{x:b.pageX||b.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)||0,y:b.pageY||b.clientY+
(document.documentElement.scrollTop||document.body.scrollTop)||0}},traverseDOM:function(b,c){c(b);for(b=b.firstChild;b;){jQuery.iUtil.traverseDOM(b,c);b=b.nextSibling}},purgeEvents:function(b){jQuery.iUtil.traverseDOM(b,function(c){for(var d in c)if(typeof c[d]==="function")c[d]=null})},centerEl:function(b,c){var d=jQuery.iUtil.getScroll(),e=jQuery.iUtil.getSize(b);if(!c||c=="vertically")jQuery(b).css({top:d.t+(Math.max(d.h,d.ih)-d.t-e.hb)/2+"px"});if(!c||c=="horizontally")jQuery(b).css({left:d.l+
(Math.max(d.w,d.iw)-d.l-e.wb)/2+"px"})},fixPNG:function(b,c){var d;jQuery('img[@src*="png"]',b||document).each(function(){d=this.src;this.src=c;this.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"')"})}};[].indexOf||(Array.prototype.indexOf=function(b,c){for(var d=this.length,e=c==null?0:c;e<d;e++)if(this[e]==b)return e;return-1});
jQuery.iDrag={helper:null,dragged:null,destroy:function(){return this.each(function(){if(this.isDraggable){this.dragCfg.dhe.unbind("mousedown",jQuery.iDrag.draginit);this.dragCfg=null;this.isDraggable=false;if(jQuery.browser.msie)this.unselectable="off";else{this.style.MozUserSelect="";this.style.KhtmlUserSelect="";this.style.userSelect=""}}})},draginit:function(b){if(jQuery.iDrag.dragged!=null){jQuery.iDrag.dragstop(b);return false}var c=this.dragElem;jQuery(document).bind("mousemove",jQuery.iDrag.dragmove).bind("mouseup",
jQuery.iDrag.dragstop);c.dragCfg.pointer=jQuery.iUtil.getPointer(b);c.dragCfg.currentPointer=c.dragCfg.pointer;c.dragCfg.init=false;c.dragCfg.fromHandler=this!=this.dragElem;jQuery.iDrag.dragged=c;if(c.dragCfg.si&&this!=this.dragElem){parentPos=jQuery.iUtil.getPosition(c.parentNode);sliderSize=jQuery.iUtil.getSize(c);sliderPos={x:parseInt(jQuery.css(c,"left"))||0,y:parseInt(jQuery.css(c,"top"))||0};dx=c.dragCfg.currentPointer.x-parentPos.x-sliderSize.wb/2-sliderPos.x;dy=c.dragCfg.currentPointer.y-
parentPos.y-sliderSize.hb/2-sliderPos.y;jQuery.iSlider.dragmoveBy(c,[dx,dy])}return jQuery.selectKeyHelper||false},dragstart:function(){var b=jQuery.iDrag.dragged;b.dragCfg.init=true;var c=b.style;b.dragCfg.oD=jQuery.css(b,"display");b.dragCfg.oP=jQuery.css(b,"position");if(!b.dragCfg.initialPosition)b.dragCfg.initialPosition=b.dragCfg.oP;b.dragCfg.oR={x:parseInt(jQuery.css(b,"left"))||0,y:parseInt(jQuery.css(b,"top"))||0};b.dragCfg.diffX=0;b.dragCfg.diffY=0;if(jQuery.browser.msie){var d=jQuery.iUtil.getBorder(b,
true);b.dragCfg.diffX=d.l||0;b.dragCfg.diffY=d.t||0}b.dragCfg.oC=jQuery.extend(jQuery.iUtil.getPosition(b),jQuery.iUtil.getSize(b));if(b.dragCfg.oP!="relative"&&b.dragCfg.oP!="absolute")c.position="relative";jQuery.iDrag.helper.empty();d=b.cloneNode(true);jQuery(d).css({display:"block",left:"0px",top:"0px"});d.style.marginTop="0";d.style.marginRight="0";d.style.marginBottom="0";d.style.marginLeft="0";jQuery.iDrag.helper.append(d);var e=jQuery.iDrag.helper.get(0).style;if(b.dragCfg.autoSize){e.width=
"auto";e.height="auto"}else{e.height=b.dragCfg.oC.hb+"px";e.width=b.dragCfg.oC.wb+"px"}e.display="block";e.marginTop="0px";e.marginRight="0px";e.marginBottom="0px";e.marginLeft="0px";jQuery.extend(b.dragCfg.oC,jQuery.iUtil.getSize(d));if(b.dragCfg.cursorAt){if(b.dragCfg.cursorAt.left){b.dragCfg.oR.x+=b.dragCfg.pointer.x-b.dragCfg.oC.x-b.dragCfg.cursorAt.left;b.dragCfg.oC.x=b.dragCfg.pointer.x-b.dragCfg.cursorAt.left}if(b.dragCfg.cursorAt.top){b.dragCfg.oR.y+=b.dragCfg.pointer.y-b.dragCfg.oC.y-b.dragCfg.cursorAt.top;
b.dragCfg.oC.y=b.dragCfg.pointer.y-b.dragCfg.cursorAt.top}if(b.dragCfg.cursorAt.right){b.dragCfg.oR.x+=b.dragCfg.pointer.x-b.dragCfg.oC.x-b.dragCfg.oC.hb+b.dragCfg.cursorAt.right;b.dragCfg.oC.x=b.dragCfg.pointer.x-b.dragCfg.oC.wb+b.dragCfg.cursorAt.right}if(b.dragCfg.cursorAt.bottom){b.dragCfg.oR.y+=b.dragCfg.pointer.y-b.dragCfg.oC.y-b.dragCfg.oC.hb+b.dragCfg.cursorAt.bottom;b.dragCfg.oC.y=b.dragCfg.pointer.y-b.dragCfg.oC.hb+b.dragCfg.cursorAt.bottom}}b.dragCfg.nx=b.dragCfg.oR.x;b.dragCfg.ny=b.dragCfg.oR.y;
if(b.dragCfg.insideParent||b.dragCfg.containment=="parent"){parentBorders=jQuery.iUtil.getBorder(b.parentNode,true);b.dragCfg.oC.x=b.offsetLeft+(jQuery.browser.msie?0:jQuery.browser.opera?-parentBorders.l:parentBorders.l);b.dragCfg.oC.y=b.offsetTop+(jQuery.browser.msie?0:jQuery.browser.opera?-parentBorders.t:parentBorders.t);jQuery(b.parentNode).append(jQuery.iDrag.helper.get(0))}if(b.dragCfg.containment){jQuery.iDrag.getContainment(b);b.dragCfg.onDragModifier.containment=jQuery.iDrag.fitToContainer}b.dragCfg.si&&
jQuery.iSlider.modifyContainer(b);e.left=b.dragCfg.oC.x-b.dragCfg.diffX+"px";e.top=b.dragCfg.oC.y-b.dragCfg.diffY+"px";e.width=b.dragCfg.oC.wb+"px";e.height=b.dragCfg.oC.hb+"px";jQuery.iDrag.dragged.dragCfg.prot=false;if(b.dragCfg.gx)b.dragCfg.onDragModifier.grid=jQuery.iDrag.snapToGrid;b.dragCfg.zIndex!=false&&jQuery.iDrag.helper.css("zIndex",b.dragCfg.zIndex);if(b.dragCfg.opacity){jQuery.iDrag.helper.css("opacity",b.dragCfg.opacity);window.ActiveXObject&&jQuery.iDrag.helper.css("filter","alpha(opacity="+
b.dragCfg.opacity*100+")")}if(b.dragCfg.frameClass){jQuery.iDrag.helper.addClass(b.dragCfg.frameClass);jQuery.iDrag.helper.get(0).firstChild.style.display="none"}b.dragCfg.onStart&&b.dragCfg.onStart.apply(b,[d,b.dragCfg.oR.x,b.dragCfg.oR.y]);jQuery.iDrop&&jQuery.iDrop.count>0&&jQuery.iDrop.highlight(b);if(b.dragCfg.ghosting==false)c.display="none";return false},getContainment:function(b){if(b.dragCfg.containment.constructor==String)if(b.dragCfg.containment=="parent"){b.dragCfg.cont=jQuery.extend({x:0,
y:0},jQuery.iUtil.getSize(b.parentNode));var c=jQuery.iUtil.getBorder(b.parentNode,true);b.dragCfg.cont.w=b.dragCfg.cont.wb-c.l-c.r;b.dragCfg.cont.h=b.dragCfg.cont.hb-c.t-c.b}else{if(b.dragCfg.containment=="document"){c=jQuery.iUtil.getClient();b.dragCfg.cont={x:0,y:0,w:c.w,h:c.h}}}else if(b.dragCfg.containment.constructor==Array)b.dragCfg.cont={x:parseInt(b.dragCfg.containment[0])||0,y:parseInt(b.dragCfg.containment[1])||0,w:parseInt(b.dragCfg.containment[2])||0,h:parseInt(b.dragCfg.containment[3])||
0};b.dragCfg.cont.dx=b.dragCfg.cont.x-b.dragCfg.oC.x;b.dragCfg.cont.dy=b.dragCfg.cont.y-b.dragCfg.oC.y},hidehelper:function(b){if(b.dragCfg.insideParent||b.dragCfg.containment=="parent")jQuery("body",document).append(jQuery.iDrag.helper.get(0));jQuery.iDrag.helper.empty().hide().css("opacity",1);window.ActiveXObject&&jQuery.iDrag.helper.css("filter","alpha(opacity=100)")},dragstop:function(){jQuery(document).unbind("mousemove",jQuery.iDrag.dragmove).unbind("mouseup",jQuery.iDrag.dragstop);if(jQuery.iDrag.dragged!=
null){var b=jQuery.iDrag.dragged;jQuery.iDrag.dragged=null;if(b.dragCfg.init==false)return false;b.dragCfg.so==true&&jQuery(b).css("position",b.dragCfg.oP);b.si&&jQuery.iDrag.helper.css("cursor","move");b.dragCfg.frameClass&&jQuery.iDrag.helper.removeClass(b.dragCfg.frameClass);if(b.dragCfg.revert==false){if(b.dragCfg.fx>0){if(!b.dragCfg.axis||b.dragCfg.axis=="horizontally")(new jQuery.fx(b,{duration:b.dragCfg.fx},"left")).custom(b.dragCfg.oR.x,b.dragCfg.nRx);if(!b.dragCfg.axis||b.dragCfg.axis=="vertically")(new jQuery.fx(b,
{duration:b.dragCfg.fx},"top")).custom(b.dragCfg.oR.y,b.dragCfg.nRy)}else{if(!b.dragCfg.axis||b.dragCfg.axis=="horizontally")b.style.left=b.dragCfg.nRx+"px";if(!b.dragCfg.axis||b.dragCfg.axis=="vertically")b.style.top=b.dragCfg.nRy+"px"}jQuery.iDrag.hidehelper(b);b.dragCfg.ghosting==false&&jQuery(b).css("display",b.dragCfg.oD)}else if(b.dragCfg.fx>0){b.dragCfg.prot=true;var c=false;if(jQuery.iDrop&&jQuery.iSort&&b.dragCfg.so)c=jQuery.iUtil.getPosition(jQuery.iSort.helper.get(0));jQuery.iDrag.helper.animate({left:c?
c.x:b.dragCfg.oC.x,top:c?c.y:b.dragCfg.oC.y},b.dragCfg.fx,function(){b.dragCfg.prot=false;if(b.dragCfg.ghosting==false)b.style.display=b.dragCfg.oD;jQuery.iDrag.hidehelper(b)})}else{jQuery.iDrag.hidehelper(b);b.dragCfg.ghosting==false&&jQuery(b).css("display",b.dragCfg.oD)}jQuery.iDrop&&jQuery.iDrop.count>0&&jQuery.iDrop.checkdrop(b);jQuery.iSort&&b.dragCfg.so&&jQuery.iSort.check(b);if(b.dragCfg.onChange&&(b.dragCfg.nRx!=b.dragCfg.oR.x||b.dragCfg.nRy!=b.dragCfg.oR.y))b.dragCfg.onChange.apply(b,b.dragCfg.lastSi||
[0,0,b.dragCfg.nRx,b.dragCfg.nRy]);b.dragCfg.onStop&&b.dragCfg.onStop.apply(b);return false}},snapToGrid:function(b,c,d,e){if(d!=0)d=parseInt((d+this.dragCfg.gx*d/Math.abs(d)/2)/this.dragCfg.gx)*this.dragCfg.gx;if(e!=0)e=parseInt((e+this.dragCfg.gy*e/Math.abs(e)/2)/this.dragCfg.gy)*this.dragCfg.gy;return{dx:d,dy:e,x:0,y:0}},fitToContainer:function(b,c,d,e){d=Math.min(Math.max(d,this.dragCfg.cont.dx),this.dragCfg.cont.w+this.dragCfg.cont.dx-this.dragCfg.oC.wb);e=Math.min(Math.max(e,this.dragCfg.cont.dy),
this.dragCfg.cont.h+this.dragCfg.cont.dy-this.dragCfg.oC.hb);return{dx:d,dy:e,x:0,y:0}},dragmove:function(b){if(!(jQuery.iDrag.dragged==null||jQuery.iDrag.dragged.dragCfg.prot==true)){var c=jQuery.iDrag.dragged;c.dragCfg.currentPointer=jQuery.iUtil.getPointer(b);if(c.dragCfg.init==false){distance=Math.sqrt(Math.pow(c.dragCfg.pointer.x-c.dragCfg.currentPointer.x,2)+Math.pow(c.dragCfg.pointer.y-c.dragCfg.currentPointer.y,2));if(distance<c.dragCfg.snapDistance)return;else jQuery.iDrag.dragstart(b)}b=
c.dragCfg.currentPointer.x-c.dragCfg.pointer.x;var d=c.dragCfg.currentPointer.y-c.dragCfg.pointer.y;for(var e in c.dragCfg.onDragModifier){var f=c.dragCfg.onDragModifier[e].apply(c,[c.dragCfg.oR.x+b,c.dragCfg.oR.y+d,b,d]);if(f&&f.constructor==Object){b=e!="user"?f.dx:f.x-c.dragCfg.oR.x;d=e!="user"?f.dy:f.y-c.dragCfg.oR.y}}c.dragCfg.nx=c.dragCfg.oC.x+b-c.dragCfg.diffX;c.dragCfg.ny=c.dragCfg.oC.y+d-c.dragCfg.diffY;if(c.dragCfg.si&&(c.dragCfg.onSlide||c.dragCfg.onChange))jQuery.iSlider.onSlide(c,c.dragCfg.nx,
c.dragCfg.ny);c.dragCfg.onDrag&&c.dragCfg.onDrag.apply(c,[c.dragCfg.oR.x+b,c.dragCfg.oR.y+d]);if(!c.dragCfg.axis||c.dragCfg.axis=="horizontally"){c.dragCfg.nRx=c.dragCfg.oR.x+b;jQuery.iDrag.helper.get(0).style.left=c.dragCfg.nx+"px"}if(!c.dragCfg.axis||c.dragCfg.axis=="vertically"){c.dragCfg.nRy=c.dragCfg.oR.y+d;jQuery.iDrag.helper.get(0).style.top=c.dragCfg.ny+"px"}jQuery.iDrop&&jQuery.iDrop.count>0&&jQuery.iDrop.checkhover(c);return false}},build:function(b){if(!jQuery.iDrag.helper){jQuery("body",
document).append('<div id="dragHelper"></div>');jQuery.iDrag.helper=jQuery("#dragHelper");var c=jQuery.iDrag.helper.get(0),d=c.style;d.position="absolute";d.display="none";d.cursor="move";d.listStyle="none";d.overflow="hidden";if(window.ActiveXObject)c.unselectable="on";else{d.mozUserSelect="none";d.userSelect="none";d.KhtmlUserSelect="none"}}b||(b={});return this.each(function(){if(!(this.isDraggable||!jQuery.iUtil)){if(window.ActiveXObject){this.onselectstart=function(){return false};this.ondragstart=
function(){return false}}var e=this,f=b.handle?jQuery(this).find(b.handle):jQuery(this);if(jQuery.browser.msie)f.each(function(){this.unselectable="on"});else{f.css("-moz-user-select","none");f.css("user-select","none");f.css("-khtml-user-select","none")}this.dragCfg={dhe:f,revert:b.revert?true:false,ghosting:b.ghosting?true:false,so:b.so?b.so:false,si:b.si?b.si:false,insideParent:b.insideParent?b.insideParent:false,zIndex:b.zIndex?parseInt(b.zIndex)||0:false,opacity:b.opacity?parseFloat(b.opacity):
false,fx:parseInt(b.fx)||null,hpc:b.hpc?b.hpc:false,onDragModifier:{},pointer:{},onStart:b.onStart&&b.onStart.constructor==Function?b.onStart:false,onStop:b.onStop&&b.onStop.constructor==Function?b.onStop:false,onChange:b.onChange&&b.onChange.constructor==Function?b.onChange:false,axis:/vertically|horizontally/.test(b.axis)?b.axis:false,snapDistance:b.snapDistance?parseInt(b.snapDistance)||0:0,cursorAt:b.cursorAt?b.cursorAt:false,autoSize:b.autoSize?true:false,frameClass:b.frameClass||false};if(b.onDragModifier&&
b.onDragModifier.constructor==Function)this.dragCfg.onDragModifier.user=b.onDragModifier;if(b.onDrag&&b.onDrag.constructor==Function)this.dragCfg.onDrag=b.onDrag;if(b.containment&&(b.containment.constructor==String&&(b.containment=="parent"||b.containment=="document")||b.containment.constructor==Array&&b.containment.length==4))this.dragCfg.containment=b.containment;if(b.fractions)this.dragCfg.fractions=b.fractions;if(b.grid)if(typeof b.grid=="number"){this.dragCfg.gx=parseInt(b.grid)||1;this.dragCfg.gy=
parseInt(b.grid)||1}else if(b.grid.length==2){this.dragCfg.gx=parseInt(b.grid[0])||1;this.dragCfg.gy=parseInt(b.grid[1])||1}if(b.onSlide&&b.onSlide.constructor==Function)this.dragCfg.onSlide=b.onSlide;this.isDraggable=true;f.each(function(){this.dragElem=e});f.bind("mousedown",jQuery.iDrag.draginit)}})}};jQuery.fn.extend({DraggableDestroy:jQuery.iDrag.destroy,Draggable:jQuery.iDrag.build});
jQuery.iDrop={fit:function(b,c,d,e){return b<=jQuery.iDrag.dragged.dragCfg.nx&&b+d>=jQuery.iDrag.dragged.dragCfg.nx+jQuery.iDrag.dragged.dragCfg.oC.w&&c<=jQuery.iDrag.dragged.dragCfg.ny&&c+e>=jQuery.iDrag.dragged.dragCfg.ny+jQuery.iDrag.dragged.dragCfg.oC.h?true:false},intersect:function(b,c,d,e){return!(b>jQuery.iDrag.dragged.dragCfg.nx+jQuery.iDrag.dragged.dragCfg.oC.w||b+d<jQuery.iDrag.dragged.dragCfg.nx||c>jQuery.iDrag.dragged.dragCfg.ny+jQuery.iDrag.dragged.dragCfg.oC.h||c+e<jQuery.iDrag.dragged.dragCfg.ny)?
true:false},pointer:function(b,c,d,e){return b<jQuery.iDrag.dragged.dragCfg.currentPointer.x&&b+d>jQuery.iDrag.dragged.dragCfg.currentPointer.x&&c<jQuery.iDrag.dragged.dragCfg.currentPointer.y&&c+e>jQuery.iDrag.dragged.dragCfg.currentPointer.y?true:false},overzone:false,highlighted:{},count:0,zones:{},highlight:function(b){if(jQuery.iDrag.dragged!=null){var c;jQuery.iDrop.highlighted={};var d=false;for(c in jQuery.iDrop.zones)if(jQuery.iDrop.zones[c]!=null){var e=jQuery.iDrop.zones[c].get(0);if(jQuery(jQuery.iDrag.dragged).is("."+
e.dropCfg.a)){if(e.dropCfg.m==false){e.dropCfg.p=jQuery.extend(jQuery.iUtil.getPositionLite(e),jQuery.iUtil.getSizeLite(e));e.dropCfg.m=true}e.dropCfg.ac&&jQuery.iDrop.zones[c].addClass(e.dropCfg.ac);jQuery.iDrop.highlighted[c]=jQuery.iDrop.zones[c];if(jQuery.iSort&&e.dropCfg.s&&jQuery.iDrag.dragged.dragCfg.so){e.dropCfg.el=jQuery("."+e.dropCfg.a,e);b.style.display="none";jQuery.iSort.measure(e);e.dropCfg.os=jQuery.iSort.serialize(jQuery.attr(e,"id")).hash;b.style.display=b.dragCfg.oD;d=true}e.dropCfg.onActivate&&
e.dropCfg.onActivate.apply(jQuery.iDrop.zones[c].get(0),[jQuery.iDrag.dragged])}}d&&jQuery.iSort.start()}},remeasure:function(){jQuery.iDrop.highlighted={};for(i in jQuery.iDrop.zones)if(jQuery.iDrop.zones[i]!=null){var b=jQuery.iDrop.zones[i].get(0);if(jQuery(jQuery.iDrag.dragged).is("."+b.dropCfg.a)){b.dropCfg.p=jQuery.extend(jQuery.iUtil.getPositionLite(b),jQuery.iUtil.getSizeLite(b));b.dropCfg.ac&&jQuery.iDrop.zones[i].addClass(b.dropCfg.ac);jQuery.iDrop.highlighted[i]=jQuery.iDrop.zones[i];if(jQuery.iSort&&
b.dropCfg.s&&jQuery.iDrag.dragged.dragCfg.so){b.dropCfg.el=jQuery("."+b.dropCfg.a,b);elm.style.display="none";jQuery.iSort.measure(b);elm.style.display=elm.dragCfg.oD}}}},checkhover:function(b){if(jQuery.iDrag.dragged!=null){jQuery.iDrop.overzone=false;var c,d=false,e=0;for(c in jQuery.iDrop.highlighted){var f=jQuery.iDrop.highlighted[c].get(0);if(jQuery.iDrop.overzone==false&&jQuery.iDrop[f.dropCfg.t](f.dropCfg.p.x,f.dropCfg.p.y,f.dropCfg.p.wb,f.dropCfg.p.hb)){f.dropCfg.hc&&f.dropCfg.h==false&&jQuery.iDrop.highlighted[c].addClass(f.dropCfg.hc);
if(f.dropCfg.h==false&&f.dropCfg.onHover)d=true;f.dropCfg.h=true;jQuery.iDrop.overzone=f;if(jQuery.iSort&&f.dropCfg.s&&jQuery.iDrag.dragged.dragCfg.so){jQuery.iSort.helper.get(0).className=f.dropCfg.shc;jQuery.iSort.checkhover(f)}e++}else if(f.dropCfg.h==true){f.dropCfg.onOut&&f.dropCfg.onOut.apply(f,[b,jQuery.iDrag.helper.get(0).firstChild,f.dropCfg.fx]);f.dropCfg.hc&&jQuery.iDrop.highlighted[c].removeClass(f.dropCfg.hc);f.dropCfg.h=false}}if(jQuery.iSort&&!jQuery.iDrop.overzone&&jQuery.iDrag.dragged.so)jQuery.iSort.helper.get(0).style.display=
"none";d&&jQuery.iDrop.overzone.dropCfg.onHover.apply(jQuery.iDrop.overzone,[b,jQuery.iDrag.helper.get(0).firstChild])}},checkdrop:function(b){var c;for(c in jQuery.iDrop.highlighted){var d=jQuery.iDrop.highlighted[c].get(0);d.dropCfg.ac&&jQuery.iDrop.highlighted[c].removeClass(d.dropCfg.ac);d.dropCfg.hc&&jQuery.iDrop.highlighted[c].removeClass(d.dropCfg.hc);if(d.dropCfg.s)jQuery.iSort.changed[jQuery.iSort.changed.length]=c;if(d.dropCfg.onDrop&&d.dropCfg.h==true){d.dropCfg.h=false;d.dropCfg.onDrop.apply(d,
[b,d.dropCfg.fx])}d.dropCfg.m=false;d.dropCfg.h=false}jQuery.iDrop.highlighted={}},destroy:function(){return this.each(function(){if(this.isDroppable){if(this.dropCfg.s){id=jQuery.attr(this,"id");jQuery.iSort.collected[id]=null;jQuery("."+this.dropCfg.a,this).DraggableDestroy()}jQuery.iDrop.zones["d"+this.idsa]=null;this.isDroppable=false;this.f=null}})},build:function(b){return this.each(function(){if(!(this.isDroppable==true||!b.accept||!jQuery.iUtil||!jQuery.iDrag)){this.dropCfg={a:b.accept,ac:b.activeclass||
false,hc:b.hoverclass||false,shc:b.helperclass||false,onDrop:b.ondrop||b.onDrop||false,onHover:b.onHover||b.onhover||false,onOut:b.onOut||b.onout||false,onActivate:b.onActivate||false,t:b.tolerance&&(b.tolerance=="fit"||b.tolerance=="intersect")?b.tolerance:"pointer",fx:b.fx?b.fx:false,m:false,h:false};if(b.sortable==true&&jQuery.iSort){id=jQuery.attr(this,"id");jQuery.iSort.collected[id]=this.dropCfg.a;this.dropCfg.s=true;if(b.onChange){this.dropCfg.onChange=b.onChange;this.dropCfg.os=jQuery.iSort.serialize(id).hash}}this.isDroppable=
true;this.idsa=parseInt(Math.random()*1E4);jQuery.iDrop.zones["d"+this.idsa]=jQuery(this);jQuery.iDrop.count++}})}};jQuery.fn.extend({DroppableDestroy:jQuery.iDrop.destroy,Droppable:jQuery.iDrop.build});jQuery.recallDroppables=jQuery.iDrop.remeasure;
jQuery.iSort={changed:[],collected:{},helper:false,inFrontOf:null,start:function(){if(jQuery.iDrag.dragged!=null){var b,c;jQuery.iSort.helper.get(0).className=jQuery.iDrag.dragged.dragCfg.hpc;b=jQuery.iSort.helper.get(0).style;b.display="block";jQuery.iSort.helper.oC=jQuery.extend(jQuery.iUtil.getPosition(jQuery.iSort.helper.get(0)),jQuery.iUtil.getSize(jQuery.iSort.helper.get(0)));b.width=jQuery.iDrag.dragged.dragCfg.oC.wb+"px";b.height=jQuery.iDrag.dragged.dragCfg.oC.hb+"px";c=jQuery.iUtil.getMargins(jQuery.iDrag.dragged);
b.marginTop=c.t;b.marginRight=c.r;b.marginBottom=c.b;b.marginLeft=c.l;if(jQuery.iDrag.dragged.dragCfg.ghosting==true){b=jQuery.iDrag.dragged.cloneNode(true);c=b.style;c.marginTop="0px";c.marginRight="0px";c.marginBottom="0px";c.marginLeft="0px";c.display="block";jQuery.iSort.helper.empty().append(b)}jQuery(jQuery.iDrag.dragged).after(jQuery.iSort.helper.get(0));jQuery.iDrag.dragged.style.display="none"}},check:function(b){if(!b.dragCfg.so&&jQuery.iDrop.overzone.sortable){b.dragCfg.onStop&&b.dragCfg.onStop.apply(dragged);
jQuery(b).css("position",b.dragCfg.initialPosition||b.dragCfg.oP);jQuery(b).DraggableDestroy();jQuery(jQuery.iDrop.overzone).SortableAddItem(b)}jQuery.iSort.helper.removeClass(b.dragCfg.hpc).html("&nbsp;");jQuery.iSort.inFrontOf=null;jQuery.iSort.helper.get(0).style.display="none";jQuery.iSort.helper.after(b);b.dragCfg.fx>0&&jQuery(b).fadeIn(b.dragCfg.fx);jQuery("body").append(jQuery.iSort.helper.get(0));b=[];for(var c=false,d=0;d<jQuery.iSort.changed.length;d++){var e=jQuery.iDrop.zones[jQuery.iSort.changed[d]].get(0),
f=jQuery.attr(e,"id"),g=jQuery.iSort.serialize(f);if(e.dropCfg.os!=g.hash){e.dropCfg.os=g.hash;if(c==false&&e.dropCfg.onChange)c=e.dropCfg.onChange;g.id=f;b[b.length]=g}}jQuery.iSort.changed=[];c!=false&&b.length>0&&c(b)},checkhover:function(b){if(jQuery.iDrag.dragged){var c=false,d=0;if(b.dropCfg.el.size()>0)for(d=b.dropCfg.el.size();d>0;d--)if(b.dropCfg.el.get(d-1)!=jQuery.iDrag.dragged)if(b.sortCfg.floats){if(b.dropCfg.el.get(d-1).pos.x+b.dropCfg.el.get(d-1).pos.wb/2>jQuery.iDrag.dragged.dragCfg.nx&&
b.dropCfg.el.get(d-1).pos.y+b.dropCfg.el.get(d-1).pos.hb/2>jQuery.iDrag.dragged.dragCfg.ny)c=b.dropCfg.el.get(d-1)}else if(b.dropCfg.el.get(d-1).pos.y+b.dropCfg.el.get(d-1).pos.hb/2>jQuery.iDrag.dragged.dragCfg.ny)c=b.dropCfg.el.get(d-1);else break;if(c&&jQuery.iSort.inFrontOf!=c){jQuery.iSort.inFrontOf=c;jQuery(c).before(jQuery.iSort.helper.get(0))}else if(!c&&(jQuery.iSort.inFrontOf!=null||jQuery.iSort.helper.get(0).parentNode!=b)){jQuery.iSort.inFrontOf=null;jQuery(b).append(jQuery.iSort.helper.get(0))}jQuery.iSort.helper.get(0).style.display=
"block"}},measure:function(b){jQuery.iDrag.dragged!=null&&b.dropCfg.el.each(function(){this.pos=jQuery.extend(jQuery.iUtil.getSizeLite(this),jQuery.iUtil.getPositionLite(this))})},serialize:function(b){var c,d="",e={};if(b)if(jQuery.iSort.collected[b]){e[b]=[];jQuery("#"+b+" ."+jQuery.iSort.collected[b]).each(function(){if(d.length>0)d+="&";d+=b+"[]="+jQuery.attr(this,"id");e[b][e[b].length]=jQuery.attr(this,"id")})}else for(a in b){if(jQuery.iSort.collected[b[a]]){e[b[a]]=[];jQuery("#"+b[a]+" ."+
jQuery.iSort.collected[b[a]]).each(function(){if(d.length>0)d+="&";d+=b[a]+"[]="+jQuery.attr(this,"id");e[b[a]][e[b[a]].length]=jQuery.attr(this,"id")})}}else for(c in jQuery.iSort.collected){e[c]=[];jQuery("#"+c+" ."+jQuery.iSort.collected[c]).each(function(){if(d.length>0)d+="&";d+=c+"[]="+jQuery.attr(this,"id");e[c][e[c].length]=jQuery.attr(this,"id")})}return{hash:d,o:e}},addItem:function(b){if(b.childNodes)return this.each(function(){if(!this.sortCfg||!jQuery(b).is("."+this.sortCfg.accept))jQuery(b).addClass(this.sortCfg.accept);
jQuery(b).Draggable(this.sortCfg.dragCfg)})},destroy:function(){return this.each(function(){jQuery("."+this.sortCfg.accept).DraggableDestroy();jQuery(this).DroppableDestroy();this.isSortable=this.sortCfg=null})},build:function(b){if(b.accept&&jQuery.iUtil&&jQuery.iDrag&&jQuery.iDrop){if(!jQuery.iSort.helper){jQuery("body",document).append('<div id="sortHelper">&nbsp;</div>');jQuery.iSort.helper=jQuery("#sortHelper");jQuery.iSort.helper.get(0).style.display="none"}this.Droppable({accept:b.accept,activeclass:b.activeclass?
b.activeclass:false,hoverclass:b.hoverclass?b.hoverclass:false,helperclass:b.helperclass?b.helperclass:false,onHover:b.onHover||b.onhover,onOut:b.onOut||b.onout,sortable:true,onChange:b.onChange||b.onchange,fx:b.fx?b.fx:false,ghosting:b.ghosting?true:false,tolerance:b.tolerance?b.tolerance:"intersect"});return this.each(function(){var c={revert:b.revert?true:false,zindex:3E3,opacity:b.opacity?parseFloat(b.opacity):false,hpc:b.helperclass?b.helperclass:false,fx:b.fx?b.fx:false,so:true,ghosting:b.ghosting?
true:false,handle:b.handle?b.handle:null,containment:b.containment?b.containment:null,onStart:b.onStart&&b.onStart.constructor==Function?b.onStart:false,onDrag:b.onDrag&&b.onDrag.constructor==Function?b.onDrag:false,onStop:b.onStop&&b.onStop.constructor==Function?b.onStop:false,axis:/vertically|horizontally/.test(b.axis)?b.axis:false,snapDistance:b.snapDistance?parseInt(b.snapDistance)||0:false,cursorAt:b.cursorAt?b.cursorAt:false};jQuery("."+b.accept,this).Draggable(c);this.isSortable=true;this.sortCfg=
{accept:b.accept,revert:b.revert?true:false,zindex:3E3,opacity:b.opacity?parseFloat(b.opacity):false,hpc:b.helperclass?b.helperclass:false,fx:b.fx?b.fx:false,so:true,ghosting:b.ghosting?true:false,handle:b.handle?b.handle:null,containment:b.containment?b.containment:null,floats:b.floats?true:false,dragCfg:c}})}}};jQuery.fn.extend({Sortable:jQuery.iSort.build,SortableAddItem:jQuery.iSort.addItem,SortableDestroy:jQuery.iSort.destroy});jQuery.SortSerialize=jQuery.iSort.serialize;