CKEDITOR.plugins.add("codemirror",{requires:["sourcearea"],init:function(a){var e=this.path;a.on("mode",function(){if(a.mode=="source"){var b=["newpage","preview","selectAll"];for(i in b)a.getCommand(b[i]).setState(CKEDITOR.TRISTATE_DISABLED);var c=CodeMirror.fromTextArea(a.textarea.$,{stylesheet:e+"css/colors.css",path:e+"js/",parserfile:"parsemixed.js",passDelay:300,passTime:35,continuousScanning:1E3,undoDepth:1,height:a.textarea.$.clientHeight+"px",textWrapping:true,lineNumbers:false,enterMode:"flat"});
a.on("beforeCommandExec",function(d){d.removeListener();a.textarea.setValue(c.getCode());a.fire("dataReady")});CKEDITOR.plugins.mirrorSnapshotCmd={exec:function(d){if(d.mode=="source"){d.textarea.setValue(c.getCode());d.fire("dataReady")}},async:true,canUndo:false,editorFocus:false};a.addCommand("mirrorSnapshot",CKEDITOR.plugins.mirrorSnapshotCmd)}});a.on("instanceReady",function(b){b.removeListener();if(a.mode=="wysiwyg"){a.ogHolderHeight=a.config.height;editorMode===2&&a.execCommand("source")}if(a.mode==
"source")a.ogHolderHeight=a.textarea.$.clientHeight+"px"});a.on("resize",function(){if(a.mode=="source"){var b=a.textarea.getParent().$.clientHeight+"px",c=[];c=document.getElementsByTagName("div");b=a.getCommand("maximize").state===2?b:a.ogHolderHeight;for(i=0;i<c.length;i++)if(c[i].className=="CodeMirror-wrapping")c[i].style.height=b}})}});