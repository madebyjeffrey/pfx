CKEDITOR.plugins.add("pfxImage",{init:function(a){CKEDITOR.dialog.add("pfxImage",this.path+"dialogs/pfxImage.js");a.addCommand("pfxImage",new CKEDITOR.dialogCommand("pfxImage"));a.ui.addButton("pfxImage",{label:a.lang.common.image,command:"pfxImage"});a.on("doubleclick",function(b){var c=b.data.element;if(c.is("img")&&!c.getAttribute("_cke_realelement"))b.data.dialog="pfxImage"});a.addMenuItems&&a.addMenuItems({pfxImage:{label:a.lang.image.menu,command:"pfxImage",group:"pfxImage"}});a.contextMenu&&
a.contextMenu.addListener(function(b){if(!b||!b.is("img")||b.getAttribute("_cke_realelement")||b.isReadOnly())return null;return{pfxImage:CKEDITOR.TRISTATE_OFF}})}});CKEDITOR.config.pfxImage_removeLinkByEmptyURL=true;