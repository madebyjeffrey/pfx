CKEDITOR.dialog.add("anchor",function(c){var e=function(a,b,d){this.editMode=true;this.editObj=d;(a=this.editObj.getAttribute("name"))?this.setValueOf("info","txtName",a):this.setValueOf("info","txtName","")};return{title:c.lang.anchor.title,minWidth:300,minHeight:60,onOk:function(){var a=this.getValueOf("info","txtName"),b=CKEDITOR.env.ie?c.document.createElement('<a name="'+CKEDITOR.tools.htmlEncode(a)+'">'):c.document.createElement("a");if(this.editMode){this.editObj.copyAttributes(b,{name:1});
this.editObj.moveChildren(b)}b.removeAttribute("_cke_saved_name");b.setAttribute("name",a);a=c.createFakeElement(b,"cke_anchor","anchor");if(this.editMode){a.replace(this.fakeObj);c.getSelection().selectElement(a)}else c.insertElement(a);return true},onShow:function(){this.editMode=this.fakeObj=this.editObj=false;var a=c.getSelection(),b=a.getSelectedElement();if(b&&b.getAttribute("_cke_real_element_type")&&b.getAttribute("_cke_real_element_type")=="anchor"){this.fakeObj=b;b=c.restoreRealElement(this.fakeObj);
e.apply(this,[c,a,b]);a.selectElement(this.fakeObj)}this.getContentElement("info","txtName").focus()},contents:[{id:"info",label:c.lang.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:c.lang.anchor.name,required:true,validate:function(){if(!this.getValue()){alert(c.lang.anchor.errorName);return false}return true}}]}]}});