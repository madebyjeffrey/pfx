CKEDITOR.plugins.add("pfxPageBreak",{lang:["en"],init:function(b){b.addCommand("pfxPageBreak",CKEDITOR.plugins.pfxPageBreakCmd);b.ui.addButton("pfxPageBreak",{label:b.lang.langPfxPageBreak.label,command:"pfxPageBreak"});b.addCss("img.cke_pfxPageBreak{background-image: url("+CKEDITOR.getUrl(this.path+"images/pfxPageBreak.png")+");background-position: center center;background-repeat: no-repeat;clear: both;display: block;float: none;width:100% !important; width:99.9% !important;border-top: #999999 1px dotted;border-bottom: #999999 1px dotted;height: 5px !important;page-break-after: always;}")},
afterInit:function(b){var a=b.dataProcessor;(a=a&&a.dataFilter)&&a.addRules({elements:{span:function(d){var c=d.attributes;if((c=c&&c.style)&&/page-break/i.test(c))return b.createFakeParserElement(d,"cke_pfxPageBreak","span")}}})},requires:["fakeobjects"]});
CKEDITOR.plugins.pfxPageBreakCmd={exec:function(b){var a=CKEDITOR.dom.element.createFromHtml('<span class="page-break"><!--more--\></span>');a=b.createFakeElement(a,"cke_pfxPageBreak","span");var d=b.getSelection().getRanges(true);b.fire("saveSnapshot");for(var c,e=d.length-1;e>=0;e--){c=d[e];if(e<d.length-1)a=a.clone(true);c.insertNode(a);if(e==d.length-1){c.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);c.select()}(c=a.getPrevious())&&CKEDITOR.dtd[c.getName()].span&&a.move(c)}b.fire("saveSnapshot")}};
CKEDITOR.plugins.setLang("pfxPageBreak","en",{langPfxPageBreak:{title:"Page Break",label:"Split the post with a more tag"}});