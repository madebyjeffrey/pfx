jQuery.fn.extend({selectbox:function(j){return this.each(function(){new jQuery.SelectBox(this,j)})}});if(!window.console)var console={log:function(){}};jQuery.SelectBox=function(j,p){function l(d){var b=jQuery("li",c);if(b){e+=d;if(e<0)e=0;else if(e>=b.size())e=b.size()-1;b.removeClass(a.hoverClass);jQuery(b[e]).addClass(a.hoverClass)}}var a=p||{};a.inputClass=a.inputClass||"selectbox";a.containerClass=a.containerClass||"selectbox-wrapper";a.hoverClass=a.hoverClass||"current";a.currentClass=a.selectedClass||"selected";a.debug=a.debug||false;var m=j.id,e=-1,n=false,f=0,k=jQuery(j),c=function(d){var b=document.createElement("div");c=jQuery(b);c.attr("id",m+"_container");c.addClass(d.containerClass);return c}(a),g=function(d){var b=document.createElement("input");b=jQuery(b);b.attr("id",m+"_input");b.attr("type","text");b.addClass(d.inputClass);b.attr("autocomplete","off");b.attr("readonly","readonly");b.attr("tabIndex",k.attr("tabindex"));return b}(a);k.hide().before(g).before(c);c.append(function(d){var b=document.createElement("ul");k.children("option").each(function(){var i=document.createElement("li");i.setAttribute("id",d+"_"+jQuery(this).val());i.innerHTML=jQuery(this).html();if(jQuery(this).is(":selected")){g.val(jQuery(this).html());jQuery(i).addClass(a.currentClass)}b.appendChild(i);jQuery(i).mouseover(function(h){f=1;a.debug&&console.log("over on : "+this.id);jQuery(h.target,c).addClass(a.hoverClass)}).mouseout(function(h){f=-1;a.debug&&console.log("out on : "+this.id);jQuery(h.target,c).removeClass(a.hoverClass)}).click(function(){jQuery("li."+a.hoverClass,c).get(0);a.debug&&console.log("click on :"+this.id);jQuery("li."+a.currentClass).removeClass(a.currentClass);jQuery(this).addClass(a.currentClass);var h=jQuery("li."+a.currentClass,c).get(0),o=(""+h.id).split("_");k.val(o[o.length-1]);g.val(jQuery(h).html());f=0;c.hide()})});return b}(g.attr("id"))).hide();g.css("width");g.click(function(){n||c.toggle()}).focus(function(){if(c.not(":visible")){n=true;c.show()}}).keydown(function(d){switch(d.keyCode){case 38:d.preventDefault();l(-1);break;case 40:d.preventDefault();l(1);break;case 13:d.preventDefault();jQuery("li."+a.hoverClass).trigger("click");break;case 27:f=0;c.hide()}}).blur(function(){if(c.is(":visible")&&f>0)a.debug&&console.log("container visible and has focus");else{f=0;c.hide()}})};